"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[762],{762:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(379),l=s(236),n=s(78),i=s(115),r=s(43),d=s(3),o=s(411);const c=async(e,t)=>{try{return(await o.A.put("/task/edit/".concat(e),t)).data}catch(s){throw s}};var u=s(244),x=s(942),m=s(192),h=s(579);function b(e){let{status:t,children:s}=e;const{setNodeRef:a}=(0,x.zM)({id:t});return(0,h.jsx)("div",{ref:a,className:"bg-gray-200 p-4 rounded min-h-[200px]",children:s})}function p(e){let{task:t,onClick:s,onDelete:l}=e;const{attributes:n,listeners:i,setNodeRef:r,transform:d,transition:o}=(0,x.PM)({id:t._id}),c={transform:d?"translate3d(".concat(d.x,"px, ").concat(d.y,"px, 0)"):void 0,transition:o,zIndex:d?100:"auto"};return(0,h.jsxs)("div",(0,a.A)((0,a.A)((0,a.A)({ref:r},i),n),{},{style:c,onClick:s,className:"bg-white p-4 rounded shadow mb-3 hover:shadow-md cursor-pointer",children:[(0,h.jsx)("h3",{className:"font-bold",children:t.title}),(0,h.jsx)("p",{children:t.description}),(0,h.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[(0,h.jsxs)("p",{children:[(0,h.jsx)("span",{className:"text-sm text-gray-800 font-semibold",children:"Created:"})," ",new Date(t.createdAt).toLocaleString()]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("span",{className:"text-sm text-gray-800 font-semibold",children:"Updated:"})," ",new Date(t.updatedAt).toLocaleString()]})]}),(0,h.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,h.jsx)("span",{className:"bg-blue-100 px-2 py-1 rounded text-xs",children:t.status}),(0,h.jsxs)("div",{children:[(0,h.jsx)("button",{onClick:e=>{e.stopPropagation(),s(t)},className:"text-green-600 hover:text-green-800 text-sm",title:"Edit Task",children:"\u270f\ufe0f"}),(0,h.jsx)("button",{onClick:e=>{e.stopPropagation(),l(t._id,e)},className:"text-red-500 text-xl ms-1",children:"\ud83d\uddd1"})]})]})]}))}function v(e){let{tasks:t,onEdit:s,onDelete:a}=e;return(0,h.jsx)(m.Y1,{height:200,itemCount:t.length,itemSize:160,width:"100%",className:"no-scrollbar",children:e=>{let{index:l,style:n}=e;return(0,h.jsx)(p,{task:t[l],onClick:s,onDelete:a,style:n})}})}const g=function(){var e;const t=(0,l.Zp)(),s=(0,d.wA)(),m=(0,d.d4)((e=>e.todos)),[p,g]=(0,r.useState)((()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null})),[f,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)({title:"",description:"",status:"Pending"}),[k,w]=(0,r.useState)(null),[C,A]=(0,r.useState)(!1),[T,S]=(0,r.useState)(!1),R=[{label:"Pending",value:"Pending"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"}];(0,r.useEffect)((()=>{p?g(p):t("/login")}),[]);const D=async()=>{try{const e=await(async e=>{try{return(await o.A.get("/task/get/".concat(e))).data}catch(t){throw t}})(p._id);s((0,u.m_)(null===e||void 0===e?void 0:e.task))}catch(e){i.oR.error("Failed to load tasks")}};(0,r.useEffect)((()=>{D()}),[s]);const P=()=>{S(!1),setTimeout((()=>{j(!1),N({title:"",description:"",status:"Pending"}),w(null)}),300)},E=()=>{j(!0),setTimeout((()=>S(!0)),10)},_=async(e,t)=>{t.preventDefault(),t.stopPropagation();try{await(async e=>{try{return(await o.A.delete("/task/delete/".concat(e))).data}catch(t){throw t}})(e),s((0,u.fA)(e)),i.oR.success("Task deleted successfully!")}catch(n){var a,l;i.oR.error((null===(a=n.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)||"Task deletion failed")}},M=e=>{w(e._id),N({title:e.title,description:e.description,status:e.status}),E()},z=e=>(null===m||void 0===m?void 0:m.filter((t=>t.status===e)))||[];return(0,h.jsxs)("div",{className:"p-6 min-h-screen bg-gray-100",children:[(0,h.jsx)("h1",{className:"text-2xl font-bold text-center my-8",children:"Task Management Board"}),(0,h.jsx)("header",{className:"flex flex-wrap justify-between items-center mb-8",children:(0,h.jsx)("div",{className:"w-3/4 mx-auto",children:(0,h.jsxs)("div",{className:"bg-blue-400/5 py-4 px-6 rounded mb-4 sm:flex justify-between items-center border-blue-100 border",children:[(0,h.jsxs)("p",{className:"font-semibold",children:[p.firstName," ",p.lastName]}),(0,h.jsx)("p",{className:"font-semibold",children:p.email}),(0,h.jsx)("ul",{className:"sm:pl-6 font-semibold",children:null===(e=p.numbers)||void 0===e?void 0:e.map(((e,t)=>(0,h.jsx)("li",{children:e},t)))})]})})}),(0,h.jsxs)("div",{className:"mb-6 space-x-4 flex justify-end",children:[(0,h.jsx)("button",{onClick:async()=>{try{await(0,n.Gu)(),localStorage.clear(),t("/login")}catch(e){i.oR.error("Logout Failed..!")}},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"Logout"}),(0,h.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",onClick:E,children:"+ Add Task"})]}),(0,h.jsx)(x.Mp,{onDragEnd:async e=>{const{active:t,over:a}=e;if(!a||t.id===a.id)return;const l=m.find((e=>e._id===t.id)),n=a.id;if(l&&l.status!==n)try{const e=await c(t.id,{status:n});s((0,u.Cn)(null===e||void 0===e?void 0:e.task)),i.oR.success("Task moved")}catch(r){i.oR.error("Move failed")}},children:(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:R.map((e=>(0,h.jsxs)(b,{status:e.value,children:[(0,h.jsxs)("h2",{className:"font-bold text-lg mb-4 flex justify-between items-center",children:[e.label,(0,h.jsx)("span",{className:"bg-gray-300 px-2 py-1 rounded-full text-sm",children:z(e.value).length||0})]}),(0,h.jsx)(v,{tasks:z(e.value),onEdit:M,onDelete:_})]},e.value)))})}),f&&(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 transition-opacity duration-300 ".concat(T?"opacity-100":"opacity-0"),children:(0,h.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-8 transform transition-all duration-300 ".concat(T?"scale-100 opacity-100":"scale-95 opacity-0"),children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,h.jsx)("h2",{className:"text-xl font-semibold",children:k?"Edit Task":"Add New Task"}),(0,h.jsx)("button",{onClick:P,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!y.title||!y.description)return i.oR.error("Fill all Fields..!");try{if(k){const e=await c(k,y);s((0,u.Cn)(null===e||void 0===e?void 0:e.task)),i.oR.success("Task updated successfully!")}else{const e=await(async e=>{try{return(await o.A.post("/task/add",e)).data}catch(t){throw t}})(y);s((0,u.V8)(null===e||void 0===e?void 0:e.task)),i.oR.success("Task added successfully!")}P()}catch(l){var t,a;i.oR.error((null===(t=l.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Task operation failed")}},children:[(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{className:"block text-gray-700 mb-2",children:"Title"}),(0,h.jsx)("input",{type:"text",value:y.title,onChange:e=>N((0,a.A)((0,a.A)({},y),{},{title:e.target.value})),className:"w-full p-2 border rounded",required:!0})]}),(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{className:"block text-gray-700 mb-2",children:"Description"}),(0,h.jsx)("textarea",{value:y.description,onChange:e=>N((0,a.A)((0,a.A)({},y),{},{description:e.target.value})),className:"w-full p-2 border rounded",rows:"3",required:!0})]}),(0,h.jsxs)("div",{className:"mb-4 relative",children:[(0,h.jsx)("label",{className:"block text-gray-700 mb-2",children:"Status"}),(0,h.jsx)("div",{className:"w-full p-2 border rounded cursor-pointer bg-white",onClick:()=>A(!C),children:y.status}),C&&(0,h.jsx)("ul",{className:"border rounded mt-2",children:null===R||void 0===R?void 0:R.map((e=>(0,h.jsx)("li",{onClick:()=>{N((0,a.A)((0,a.A)({},y),{},{status:e.value})),A(!1)},className:"bg-blue-50 p-2 border-b border-blue-100 cursor-pointer hover:bg-blue-100 ".concat(y.status===e.value?"bg-blue-200 font-semibold":""),children:e.label},e.value)))})]}),(0,h.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,h.jsx)("button",{type:"button",onClick:P,className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Cancel"}),(0,h.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:k?"Update Task":"Add Task"})]})]})]})})]})}}}]);
//# sourceMappingURL=762.b473ef7c.chunk.js.map